services:
  - name: rabbitmq
    image: rabbitmq:3
    env: []
    ports:
      - 5672:5672
    plan: free
    type: web

  - name: selenium
    image: selenium/standalone-chrome:latest
    env: []
    ports: []
    plan: free
    type: web

  - name: producer
    image: fabrice45/assignments_producer:latest
    env:
      - key: RABBITMQ_URL
        value: amqp://guest:guest@rabbitmq:5672/
    envFrom:
      - service: rabbitmq
    ports:
      - 3000:3000
    plan: free
    type: web

  - name: umucyo-consumer
    image: fabrice45/umucyo_consumer:latest
    env:
      - key: SELENIUM_HOST
        value: selenium
      - key: SELENIUM_PORT
        value: "4444"
      - key: RABBITMQ_URL
        value: amqp://rabbitmq:5672/
    envFrom:
      - service: rabbitmq
    dependsOn:
      - name: rabbitmq
      - name: selenium
    ports:
      - 3001:3001
    plan: free
    type: web

  - name: verama-consumer
    image: fabrice45/verama_consumer:latest
    env:
      - key: RABBITMQ_HOST
        value: rabbitmq
    envFrom:
      - service: rabbitmq
    dependsOn:
      - name: rabbitmq
      - name: producer
    ports:
      - 3002:3002
    plan: free
    type: web

  - name: assignments
    image: fabrice45/assignments:latest
    env: []
    ports:
      - 4001:4001
    plan: free
    type: web
